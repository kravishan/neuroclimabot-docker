version: '3.8'

services:
  # React Frontend
  client:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # API Configuration
        - VITE_API_BASE_URL=${VITE_API_BASE_URL}
        - VITE_API_DOCUMENT_URL=${VITE_API_DOCUMENT_URL}
        - VITE_API_TIMEOUT=${VITE_API_TIMEOUT}
        # External Services
        - VITE_TRANSLATE_API_URL=${VITE_TRANSLATE_API_URL}
        - VITE_STP_SERVICE_URL=${VITE_STP_SERVICE_URL}
        - VITE_PROCESSOR_URL=${VITE_PROCESSOR_URL}
        # Application Configuration
        - VITE_APP_NAME=${VITE_APP_NAME}
        - VITE_APP_VERSION=${VITE_APP_VERSION}
        - VITE_APP_ENVIRONMENT=${VITE_APP_ENVIRONMENT}
        # Feature Flags
        - VITE_ENABLE_VOICE_MODEL=${VITE_ENABLE_VOICE_MODEL}
        - VITE_ENABLE_GRAPH_VISUALIZATION=${VITE_ENABLE_GRAPH_VISUALIZATION}
        - VITE_ENABLE_ANALYTICS=${VITE_ENABLE_ANALYTICS}
        - VITE_ENABLE_ADMIN_DASHBOARD=${VITE_ENABLE_ADMIN_DASHBOARD}
        # External Services
        - VITE_LANGSMITH_ENABLED=${VITE_LANGSMITH_ENABLED}
        - VITE_FEEDBACK_FORM_URL=${VITE_FEEDBACK_FORM_URL}
        - VITE_DASHBOARD_URL=${VITE_DASHBOARD_URL}
        # Session Configuration
        - VITE_SESSION_TIMEOUT_MINUTES=${VITE_SESSION_TIMEOUT_MINUTES}
        - VITE_INACTIVITY_WARNING_MINUTES=${VITE_INACTIVITY_WARNING_MINUTES}
        # UI Configuration
        - VITE_DEFAULT_LANGUAGE=${VITE_DEFAULT_LANGUAGE}
        - VITE_SUPPORTED_LANGUAGES=${VITE_SUPPORTED_LANGUAGES}
        # Dashboard Configuration
        - VITE_DASHBOARD_REFRESH_INTERVAL=${VITE_DASHBOARD_REFRESH_INTERVAL}
        - VITE_DASHBOARD_AUTO_REFRESH=${VITE_DASHBOARD_AUTO_REFRESH}
        # Authentication
        - VITE_AUTH_ENABLED=${VITE_AUTH_ENABLED}
    container_name: neuroclima-client
    ports:
      - "80:80"
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost/"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - neuroclima-network
    restart: unless-stopped

networks:
  neuroclima-network:
    driver: bridge
